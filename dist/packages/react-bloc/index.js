"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const w=require("react/jsx-runtime"),d=require("react"),b=require("rxjs");function pe(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const t=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,t.get?t:{enumerable:!0,get:()=>e[n]})}}return r.default=e,Object.freeze(r)}const G=pe(d),oe=()=>!1,$=()=>!0,ue=()=>!1,se=e=>e,ie=()=>!0,T=new Map,z=({children:e,classDef:r,dependencies:n=[],create:t,onMount:o,onUnmount:u})=>{const[c,a]=d.useState(!1),s=d.useRef(null);s.current===null&&(s.current=t());const l=d.useMemo(()=>{let i=T.get(r.name);return i||(i=d.createContext({initialized:c,instance:s}),T.set(r.name,i),i)},[]);return d.useEffect(()=>(s.current===null&&(s.current=t(),a(!c)),o&&o(s.current),()=>{u&&u(s.current),s.current=null}),n),d.createElement(l.Provider,{value:{initialized:c,instance:s}},e)},Y=({providers:e,children:r})=>{const n=d.useMemo(()=>e.map(o=>({children:u})=>w.jsx(o,{children:u})),[]),t=d.useMemo(()=>n.reduce((o,u)=>({children:c})=>w.jsx(o,{children:w.jsx(u,{children:c})}),({children:o})=>w.jsx(w.Fragment,{children:o})),[n]);return w.jsx(t,{children:r})},J=e=>{const r=T.get(e.name);if(!r)throw new Error(`${e.name} does not exist in the context map.`);return d.useContext(r).instance.current},W=e=>J(e);function ve(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var H={exports:{}},U={},g={exports:{}},k={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X;function Se(){if(X)return k;X=1;var e=d;function r(f,S){return f===S&&(f!==0||1/f===1/S)||f!==f&&S!==S}var n=typeof Object.is=="function"?Object.is:r,t=e.useState,o=e.useEffect,u=e.useLayoutEffect,c=e.useDebugValue;function a(f,S){var _=S(),O=t({inst:{value:_,getSnapshot:S}}),E=O[0].inst,m=O[1];return u(function(){E.value=_,E.getSnapshot=S,s(E)&&m({inst:E})},[f,_,S]),o(function(){return s(E)&&m({inst:E}),f(function(){s(E)&&m({inst:E})})},[f]),c(_),_}function s(f){var S=f.getSnapshot;f=f.value;try{var _=S();return!n(f,_)}catch{return!0}}function l(f,S){return S()}var i=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return k.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:i,k}var q={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z;function he(){return Z||(Z=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=d,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function n(h){{for(var p=arguments.length,L=new Array(p>1?p-1:0),v=1;v<p;v++)L[v-1]=arguments[v];t("error",h,L)}}function t(h,p,L){{var v=r.ReactDebugCurrentFrame,y=v.getStackAddendum();y!==""&&(p+="%s",L=L.concat([y]));var B=L.map(function(R){return String(R)});B.unshift("Warning: "+p),Function.prototype.apply.call(console[h],console,B)}}function o(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var u=typeof Object.is=="function"?Object.is:o,c=e.useState,a=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue,i=!1,f=!1;function S(h,p,L){i||e.startTransition!==void 0&&(i=!0,n("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var v=p();if(!f){var y=p();u(v,y)||(n("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}var B=c({inst:{value:v,getSnapshot:p}}),R=B[0].inst,C=B[1];return s(function(){R.value=v,R.getSnapshot=p,_(R)&&C({inst:R})},[h,v,p]),a(function(){_(R)&&C({inst:R});var M=function(){_(R)&&C({inst:R})};return h(M)},[h]),l(v),v}function _(h){var p=h.getSnapshot,L=h.value;try{var v=p();return!u(L,v)}catch{return!0}}function O(h,p,L){return p()}var E=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m=!E,x=m?O:S,D=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x;q.useSyncExternalStore=D,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),q}var ee;function ce(){return ee||(ee=1,process.env.NODE_ENV==="production"?g.exports=Se():g.exports=he()),g.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var re;function _e(){if(re)return U;re=1;var e=d,r=ce();function n(l,i){return l===i&&(l!==0||1/l===1/i)||l!==l&&i!==i}var t=typeof Object.is=="function"?Object.is:n,o=r.useSyncExternalStore,u=e.useRef,c=e.useEffect,a=e.useMemo,s=e.useDebugValue;return U.useSyncExternalStoreWithSelector=function(l,i,f,S,_){var O=u(null);if(O.current===null){var E={hasValue:!1,value:null};O.current=E}else E=O.current;O=a(function(){function x(v){if(!D){if(D=!0,h=v,v=S(v),_!==void 0&&E.hasValue){var y=E.value;if(_(y,v))return p=y}return p=v}if(y=p,t(h,v))return y;var B=S(v);return _!==void 0&&_(y,B)?y:(h=v,p=B)}var D=!1,h,p,L=f===void 0?null:f;return[function(){return x(i())},L===null?void 0:function(){return x(L())}]},[i,f,S,_]);var m=o(l,O[0],O[1]);return c(function(){E.hasValue=!0,E.value=m},[m]),s(m),m},U}var F={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te;function Ee(){return te||(te=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=d,r=ce();function n(i,f){return i===f&&(i!==0||1/i===1/f)||i!==i&&f!==f}var t=typeof Object.is=="function"?Object.is:n,o=r.useSyncExternalStore,u=e.useRef,c=e.useEffect,a=e.useMemo,s=e.useDebugValue;function l(i,f,S,_,O){var E=u(null),m;E.current===null?(m={hasValue:!1,value:null},E.current=m):m=E.current;var x=a(function(){var L=!1,v,y,B=function(V){if(!L){L=!0,v=V;var j=_(V);if(O!==void 0&&m.hasValue){var I=m.value;if(O(I,j))return y=I,I}return y=j,j}var de=v,P=y;if(t(de,V))return P;var K=_(V);return O!==void 0&&O(P,K)?P:(v=V,y=K,K)},R=S===void 0?null:S,C=function(){return B(f())},M=R===null?void 0:function(){return B(R())};return[C,M]},[f,S,_,O]),D=x[0],h=x[1],p=o(i,D,h);return c(function(){m.hasValue=!0,m.value=p},[p]),s(p),p}F.useSyncExternalStoreWithSelector=l,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),F}process.env.NODE_ENV==="production"?H.exports=_e():H.exports=Ee();var Oe=H.exports;const me=ve(Oe),{useSyncExternalStoreWithSelector:ye}=me;function ae(){const e=d.useRef(!1);return d.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),d.useCallback(()=>e.current,[])}const be=(e,r)=>{const n=ae(),t=r.suspendWhen,o=r.errorWhen,[u,c]=d.useState(()=>t(e.state)),a=d.useRef(null),s=d.useRef(e.state),l=d.useRef(null);if(d.useLayoutEffect(()=>(l.current=e.state$.pipe(b.startWith(e.state)).subscribe(i=>{t(i)&&(s.current=i,c(!0))}),()=>{var i;(i=l.current)==null||i.unsubscribe(),l.current=null}),[e]),o(e.state))throw new A(e.state);if((u||a.current)&&(a.current===null&&s.current!==null&&(a.current=b.firstValueFrom(e.state$.pipe(b.startWith(s.current),b.filter(i=>!t(i)))).then(()=>{a.current=null,s.current=null,n()&&c(!1)})),a.current))throw a.current},le=(e,r)=>{const n=W(e),t=(r==null?void 0:r.selector)??se,o=(r==null?void 0:r.listenWhen)??$,u=(r==null?void 0:r.suspendWhen)??oe,c=(r==null?void 0:r.errorWhen)??ue;be(n,{suspendWhen:u,errorWhen:c});const a=d.useCallback(l=>{const i=n.state$.pipe(b.startWith(n.state),b.distinctUntilChanged(),b.filter(f=>o(f)),b.map(f=>t(f)),b.distinctUntilChanged()).subscribe(()=>setTimeout(()=>l(),0));return()=>{i.unsubscribe()}},[n]),s=ye(a,()=>n.state,null,t);return d.useDebugValue(s),s};class A extends Error{constructor(r,n){super("useBlocSelector: errorWhen triggered a new render Error"),this.state=r,Object.setPrototypeOf(this,A.prototype)}}const Le=(e,r)=>{const n=le(e,r),t=W(e);return[n,t]},Q=(e,{listener:r,listenWhen:n})=>{const t=W(e),o=n??$,u=d.useRef(null);d.useLayoutEffect(()=>(u.current=t.state$.pipe(b.startWith(t.state),b.pairwise(),b.filter(([c,a])=>o(c,a)),b.map(([c,a])=>r(t,a))).subscribe(),()=>{var c;(c=u.current)==null||c.unsubscribe(),u.current=null}),[t])},Re=e=>{const r=W(e),n=d.useCallback(o=>{const u=r.state$.subscribe(o);return()=>u.unsubscribe()},[r]),t=d.useSyncExternalStore(n,()=>r.state);return d.useDebugValue(t),t},Be=e=>J(e);function we({bloc:e,listener:r,listenWhen:n,children:t}){return Q(e,{listener:r,listenWhen:n}),w.jsxs(w.Fragment,{children:[" ",t," "]})}const xe=({bloc:e,children:r,dependencies:n=[],create:t,onMount:o})=>z({classDef:e,create:t,onMount:o,onUnmount:u=>u.close(),dependencies:n,children:r}),We=({providers:e,children:r})=>Y({providers:e,children:r});function N(e,r){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},N(e,r)}function De(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,N(e,r)}var Ce=function(r,n){return r===void 0&&(r=[]),n===void 0&&(n=[]),r.length!==n.length||r.some(function(t,o){return!Object.is(t,n[o])})},ne={error:null},Ve=function(e){De(r,e);function r(){for(var t,o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return t=e.call.apply(e,[this].concat(u))||this,t.state=ne,t.resetErrorBoundary=function(){for(var a,s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];t.props.onReset==null||(a=t.props).onReset.apply(a,l),t.reset()},t}r.getDerivedStateFromError=function(o){return{error:o}};var n=r.prototype;return n.reset=function(){this.setState(ne)},n.componentDidCatch=function(o,u){var c,a;(c=(a=this.props).onError)==null||c.call(a,o,u)},n.componentDidUpdate=function(o,u){var c=this.state.error,a=this.props.resetKeys;if(c!==null&&u.error!==null&&Ce(o.resetKeys,a)){var s,l;(s=(l=this.props).onResetKeysChange)==null||s.call(l,o.resetKeys,a),this.reset()}},n.render=function(){var o=this.state.error,u=this.props,c=u.fallbackRender,a=u.FallbackComponent,s=u.fallback;if(o!==null){var l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(G.isValidElement(s))return s;if(typeof c=="function")return c(l);if(a)return G.createElement(a,l);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r}(G.Component);const ge=({bloc:e,fallback:r,onReset:n,children:t})=>{const o=W(e),u=d.useCallback(()=>n(o),[o]);return w.jsx(Ve,{FallbackComponent:r,onReset:u,children:t})},Te=({repository:e,children:r,dependencies:n=[],create:t,onMount:o,onUnmount:u})=>z({classDef:e,dependencies:n,onMount:o,onUnmount:u,create:t,children:r}),Ae=({providers:e,children:r})=>Y({providers:e,children:r});function fe({bloc:e,builder:r,buildWhen:n}){const t=W(e),o=n??ie,u=d.useRef(null),[c,a]=d.useState(()=>t.state);return d.useLayoutEffect(()=>(u.current=t.state$.pipe(b.startWith(c),b.pairwise(),b.filter(([s,l])=>o(s,l)),b.map(([s,l])=>{a(l)})).subscribe(),()=>{var s;(s=u.current)==null||s.unsubscribe(),u.current=null}),[]),r(c)}function Me({bloc:e,builder:r,buildWhen:n,listenWhen:t,listener:o}){return Q(e,{listener:o,listenWhen:t}),fe({bloc:e,builder:r,buildWhen:n})}exports.BlocBuilder=fe;exports.BlocConsumer=Me;exports.BlocErrorBoundary=ge;exports.BlocListener=we;exports.BlocProvider=xe;exports.BlocRenderError=A;exports.MultiBlocProvider=We;exports.MultiProvider=Y;exports.MultiRepositoryProvider=Ae;exports.Provider=z;exports.RepositoryProvider=Te;exports.defaultBuildWhen=ie;exports.defaultErrorWhen=ue;exports.defaultListenWhen=$;exports.defaultSelector=se;exports.defaultSuspendWhen=oe;exports.providerContextMap=T;exports.useBloc=Le;exports.useBlocInstance=W;exports.useBlocListener=Q;exports.useBlocSelector=le;exports.useBlocValue=Re;exports.useIsMounted=ae;exports.useProvider=J;exports.useRepository=Be;
